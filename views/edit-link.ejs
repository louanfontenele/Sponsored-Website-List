<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <title>Edit Link</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-black">
  <nav class="p-4 border-b bg-gray-100">
    <div class="container mx-auto flex justify-between">
      <a href="/admin" class="btn btn-sm btn-outline">Back to Admin Panel</a>
      <a href="/" class="btn btn-sm btn-outline">Home</a>
    </div>
  </nav>
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6">Edit Link</h1>
    <form action="/admin/edit/<%= link.id %>" method="POST" class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="label">Domain:</label>
          <input type="text" name="domain" class="input input-bordered w-full" value="<%= link.domain %>" required>
        </div>
        <div>
          <label class="label">D.A.:</label>
          <input type="number" name="da" step="1" class="input input-bordered w-full" value="<%= link.da %>" required>
        </div>
        <div>
          <label class="label">Gambling:</label>
          <div class="flex items-center gap-2">
            <button type="button" id="editGamblingBtn" class="btn btn-ghost"></button>
            <input type="hidden" name="gambling" id="editGamblingValue" value="<%= link.gambling %>">
          </div>
        </div>
        <div>
          <label class="label">Country:</label>
          <input type="text" name="country" class="input input-bordered w-full" value="<%= link.country %>" required>
        </div>
        <div>
          <label class="label">Links:</label>
          <input type="number" name="links" step="1" class="input input-bordered w-full" value="<%= link.links %>" required>
        </div>
        <div>
          <label class="label">Gambling Price (USD):</label>
          <input type="number" step="0.01" min="0" name="gambling_price" class="input input-bordered w-full" value="<%= link.gambling_price %>" required>
        </div>
        <div>
          <label class="label">General Price (USD):</label>
          <input type="number" step="0.01" min="0" name="general_price" class="input input-bordered w-full" value="<%= link.general_price %>" required>
        </div>
        <div>
          <label class="label">Tab:</label>
          <select name="tab" class="select select-bordered w-full" required>
            <option value="brazil_portugal" <%= link.tab === 'brazil_portugal' ? 'selected' : '' %>>Brazil &amp; Portugal</option>
            <option value="world" <%= link.tab === 'world' ? 'selected' : '' %>>World Websites</option>
            <option value="add_links" <%= link.tab === 'add_links' ? 'selected' : '' %>>Add Links</option>
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-success w-full">Save Changes</button>
    </form>
  </div>
  <script>
    const editGamblingBtn = document.getElementById('editGamblingBtn');
    const editGamblingValue = document.getElementById('editGamblingValue');
    const states = ["unchecked", "check", "x"];
    const emojiMap = {
      "unchecked": "⬜",
      "check": "✅",
      "x": "❌"
    };
    let currentState = editGamblingValue.value;
    if (!states.includes(currentState)) { currentState = "unchecked"; }
    editGamblingBtn.textContent = emojiMap[currentState];
    editGamblingBtn.addEventListener('click', function() {
      let index = states.indexOf(editGamblingValue.value);
      index = (index + 1) % states.length;
      const newState = states[index];
      editGamblingValue.value = newState;
      editGamblingBtn.textContent = emojiMap[newState];
    });
  </script>
</body>
</html>
