<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <title>Website List</title>
    <!-- TailwindCSS & DaisyUI via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@2.51.5/dist/full.css"
      rel="stylesheet" />
  </head>
  <body class="bg-white text-black">
    <nav class="p-4 border-b bg-gray-100">
      <a href="/" class="mr-4">Home</a>
      <a href="/contact" class="mr-4">Contact</a>
      <a href="/login">Admin</a>
    </nav>

    <div class="container mx-auto p-4">
      <h1 class="text-2xl font-bold mb-4">Website List</h1>

      <div class="tabs mb-4">
        <button
          id="tab-btn-1"
          class="tab tab-bordered tab-active"
          onclick="activateTab('brazil_portugal', 1)">
          Brazil &amp; Portugal
        </button>
        <button
          id="tab-btn-2"
          class="tab tab-bordered"
          onclick="activateTab('world', 2)">
          World Websites
        </button>
        <button
          id="tab-btn-3"
          class="tab tab-bordered"
          onclick="activateTab('add_links', 3)">
          Add Links
        </button>
      </div>

      <div id="table-container" class="overflow-x-auto">
        <table class="table w-full border border-gray-300">
          <thead class="bg-gray-100">
            <tr>
              <th colspan="2" class="text-center border border-gray-300">
                Website Information
              </th>
              <th colspan="3" class="text-center border border-gray-300">
                Article Details
              </th>
              <th colspan="2" class="text-center border border-gray-300">
                Price USD
              </th>
            </tr>
            <tr>
              <th class="border border-gray-300">Domain</th>
              <th class="border border-gray-300">D.A.</th>
              <th class="border border-gray-300">Gambling</th>
              <th class="border border-gray-300">Country</th>
              <th class="border border-gray-300">Links</th>
              <th class="border border-gray-300">Gambling Price</th>
              <th class="border border-gray-300">General Price</th>
            </tr>
          </thead>
          <tbody id="table-body" class="bg-white">
            <!-- Dados carregados via JavaScript -->
          </tbody>
        </table>
      </div>
    </div>

    <script>
      function activateTab(tab, index) {
        // remove tab-active de todos
        for (let i = 1; i <= 3; i++) {
          document
            .getElementById("tab-btn-" + i)
            .classList.remove("tab-active");
        }
        // ativa só o que foi clicado
        document.getElementById("tab-btn-" + index).classList.add("tab-active");
        showTab(tab);
      }

      function showTab(tab) {
        fetch("/api/links?tab=" + tab)
          .then((response) => response.json())
          .then((data) => {
            const tbody = document.getElementById("table-body");
            tbody.innerHTML = "";
            data.forEach((item) => {
              const row = document.createElement("tr");
              row.innerHTML = `
              <td class="border border-gray-300"><a href="https://${item.domain}" target="_blank" class="text-blue-500">${item.domain}</a></td>
              <td class="border border-gray-300">${item.da}</td>
              <td class="border border-gray-300">${item.gambling}</td>
              <td class="border border-gray-300">${item.country}</td>
              <td class="border border-gray-300">${item.links}</td>
              <td class="border border-gray-300">$${item.gambling_price}</td>
              <td class="border border-gray-300">$${item.general_price}</td>
            `;
              tbody.appendChild(row);
            });
          });
      }

      // Carrega a aba "Brazil & Portugal" por padrão
      activateTab("brazil_portugal", 1);
    </script>
  </body>
</html>
